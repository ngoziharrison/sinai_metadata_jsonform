{"version":3,"file":"jsonforms-angular.mjs","sources":["../../src/library/base.renderer.ts","../../src/library/jsonforms.service.ts","../../src/library/abstract-control.ts","../../src/library/control.ts","../../src/library/array-control.ts","../../src/library/unknown.component.ts","../../src/library/jsonforms.component.ts","../../src/library/jsonforms-root.component.ts","../../src/library/jsonforms.module.ts","../../src/library/index.ts","../../src/jsonforms-angular.ts"],"sourcesContent":["/*\n  The MIT License\n  \n  Copyright (c) 2017-2019 EclipseSource Munich\n  https://github.com/eclipsesource/jsonforms\n  \n  Permission is hereby granted, free of charge, to any person obtaining a copy\n  of this software and associated documentation files (the \"Software\"), to deal\n  in the Software without restriction, including without limitation the rights\n  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n  copies of the Software, and to permit persons to whom the Software is\n  furnished to do so, subject to the following conditions:\n  \n  The above copyright notice and this permission notice shall be included in\n  all copies or substantial portions of the Software.\n  \n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n  THE SOFTWARE.\n*/\nimport { Directive, Input } from '@angular/core';\nimport {\n  JsonSchema,\n  OwnPropsOfRenderer,\n  UISchemaElement,\n} from '@jsonforms/core';\n\n@Directive()\nexport class JsonFormsBaseRenderer<T extends UISchemaElement> {\n  @Input() uischema: T;\n  @Input() schema: JsonSchema;\n  @Input() path: string;\n\n  protected getOwnProps(): OwnPropsOfRenderer {\n    return {\n      uischema: this.uischema,\n      schema: this.schema,\n      path: this.path,\n    };\n  }\n}\n","/*\n  The MIT License\n  \n  Copyright (c) 2017-2020 EclipseSource Munich\n  https://github.com/eclipsesource/jsonforms\n  \n  Permission is hereby granted, free of charge, to any person obtaining a copy\n  of this software and associated documentation files (the \"Software\"), to deal\n  in the Software without restriction, including without limitation the rights\n  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n  copies of the Software, and to permit persons to whom the Software is\n  furnished to do so, subject to the following conditions:\n  \n  The above copyright notice and this permission notice shall be included in\n  all copies or substantial portions of the Software.\n  \n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n  THE SOFTWARE.\n*/\nimport {\n  Actions,\n  configReducer,\n  CoreActions,\n  coreReducer,\n  generateDefaultUISchema,\n  generateJsonSchema,\n  i18nReducer,\n  JsonFormsRendererRegistryEntry,\n  JsonFormsState,\n  JsonFormsSubStates,\n  JsonSchema,\n  I18nActions,\n  RankedTester,\n  setConfig,\n  SetConfigAction,\n  UISchemaActions,\n  UISchemaElement,\n  uischemaRegistryReducer,\n  UISchemaTester,\n  ValidationMode,\n  updateI18n,\n  Middleware,\n  defaultMiddleware,\n} from '@jsonforms/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport type { JsonFormsBaseRenderer } from './base.renderer';\n\nimport { cloneDeep } from 'lodash';\nimport type Ajv from 'ajv';\nimport type { ErrorObject } from 'ajv';\n\nexport const USE_STATE_VALUE = Symbol('Marker to use state value');\nexport class JsonFormsAngularService {\n  private _state: JsonFormsSubStates;\n  private state: BehaviorSubject<JsonFormsState>;\n  private middleware: Middleware;\n\n  init(\n    initialState: JsonFormsSubStates = {\n      core: {\n        data: undefined,\n        schema: undefined,\n        uischema: undefined,\n        validationMode: 'ValidateAndShow',\n        additionalErrors: undefined,\n      },\n    },\n    middleware: Middleware = defaultMiddleware\n  ) {\n    this.middleware = middleware;\n    this._state = initialState;\n    this._state.config = configReducer(\n      undefined,\n      setConfig(this._state.config)\n    );\n    this._state.i18n = i18nReducer(\n      this._state.i18n,\n      updateI18n(\n        this._state.i18n?.locale,\n        this._state.i18n?.translate,\n        this._state.i18n?.translateError\n      )\n    );\n    this.state = new BehaviorSubject({ jsonforms: this._state });\n    const data = initialState.core.data;\n    const schema = initialState.core.schema ?? generateJsonSchema(data);\n    const uischema =\n      initialState.core.uischema ?? generateDefaultUISchema(schema);\n    this.updateCore(Actions.init(data, schema, uischema));\n  }\n\n  get $state(): Observable<JsonFormsState> {\n    if (!this.state) {\n      throw new Error('Please call init first!');\n    }\n    return this.state.asObservable();\n  }\n\n  /**\n   * @deprecated use {@link JsonFormsAngularService.addRenderer}\n   */\n  registerRenderer(\n    renderer: JsonFormsBaseRenderer<UISchemaElement>,\n    tester: RankedTester\n  ): void {\n    this.addRenderer(renderer, tester);\n  }\n  addRenderer(\n    renderer: JsonFormsBaseRenderer<UISchemaElement>,\n    tester: RankedTester\n  ): void {\n    this._state.renderers.push({ renderer, tester });\n    this.updateSubject();\n  }\n\n  /**\n   * @deprecated use {@link JsonFormsAngularService.setRenderer}\n   */\n  registerRenderers(renderers: JsonFormsRendererRegistryEntry[]): void {\n    this.setRenderers(renderers);\n  }\n  setRenderers(renderers: JsonFormsRendererRegistryEntry[]): void {\n    this._state.renderers = renderers;\n    this.updateSubject();\n  }\n\n  /**\n   * @deprecated use {@link JsonFormsAngularService.removeRenderer}\n   */\n  unregisterRenderer(tester: RankedTester): void {\n    this.removeRenderer(tester);\n  }\n  removeRenderer(tester: RankedTester): void {\n    const findIndex = this._state.renderers.findIndex(\n      (v) => v.tester === tester\n    );\n    if (findIndex === -1) {\n      return;\n    }\n    const renderers = this._state.renderers.filter((v) => v.tester !== tester);\n    this._state.renderers = renderers;\n    this.updateSubject();\n  }\n\n  updateValidationMode(validationMode: ValidationMode): void {\n    const coreState = this.middleware(\n      this._state.core,\n      Actions.setValidationMode(validationMode),\n      coreReducer\n    );\n    this._state.core = coreState;\n    this.updateSubject();\n  }\n\n  updateI18n<T extends I18nActions>(i18nAction: T): T {\n    const i18nState = i18nReducer(this._state.i18n, i18nAction);\n    if (i18nState !== this._state.i18n) {\n      this._state.i18n = i18nState;\n      this.updateSubject();\n    }\n    return i18nAction;\n  }\n\n  updateCore<T extends CoreActions>(coreAction: T): T {\n    const coreState = this.middleware(\n      this._state.core,\n      coreAction,\n      coreReducer\n    );\n    if (coreState !== this._state.core) {\n      this._state.core = coreState;\n      this.updateSubject();\n    }\n    return coreAction;\n  }\n\n  /**\n   * @deprecated use {@link JsonFormsAngularService.setUiSchemas}\n   */\n  updateUiSchema<T extends UISchemaActions>(uischemaAction: T): T {\n    const uischemaState = uischemaRegistryReducer(\n      this._state.uischemas,\n      uischemaAction\n    );\n    this._state.uischemas = uischemaState;\n    this.updateSubject();\n    return uischemaAction;\n  }\n\n  setUiSchemas(\n    uischemas: { tester: UISchemaTester; uischema: UISchemaElement }[]\n  ): void {\n    this._state.uischemas = uischemas;\n    this.updateSubject();\n  }\n\n  updateConfig<T extends SetConfigAction>(setConfigAction: T): T {\n    const configState = configReducer(this._state.config, setConfigAction);\n    this._state.config = configState;\n    this.updateSubject();\n    return setConfigAction;\n  }\n\n  setUiSchema(uischema: UISchemaElement | undefined): void {\n    const newUiSchema =\n      uischema ?? generateDefaultUISchema(this._state.core.schema);\n    const coreState = this.middleware(\n      this._state.core,\n      Actions.updateCore(\n        this._state.core.data,\n        this._state.core.schema,\n        newUiSchema\n      ),\n      coreReducer\n    );\n    if (coreState !== this._state.core) {\n      this._state.core = coreState;\n      this.updateSubject();\n    }\n  }\n\n  setSchema(schema: JsonSchema | undefined): void {\n    const coreState = this.middleware(\n      this._state.core,\n      Actions.updateCore(\n        this._state.core.data,\n        schema ?? generateJsonSchema(this._state.core.data),\n        this._state.core.uischema\n      ),\n      coreReducer\n    );\n    if (coreState !== this._state.core) {\n      this._state.core = coreState;\n      this.updateSubject();\n    }\n  }\n\n  setData(data: any): void {\n    const coreState = this.middleware(\n      this._state.core,\n      Actions.updateCore(\n        data,\n        this._state.core.schema,\n        this._state.core.uischema\n      ),\n      coreReducer\n    );\n    if (coreState !== this._state.core) {\n      this._state.core = coreState;\n      this.updateSubject();\n    }\n  }\n\n  getLocale(): string | undefined {\n    return this._state.i18n?.locale;\n  }\n\n  setLocale(locale: string): void {\n    this._state.i18n.locale = locale;\n    this.updateSubject();\n  }\n\n  setReadonly(readonly: boolean): void {\n    this._state.readonly = readonly;\n    this.updateSubject();\n  }\n\n  setMiddleware(middleware: Middleware): void {\n    this._state.middleware = middleware;\n    this.updateSubject();\n  }\n\n  getState(): JsonFormsState {\n    return cloneDeep({ jsonforms: this._state });\n  }\n\n  getConfig(): any {\n    return cloneDeep(this._state.config);\n  }\n\n  refresh(): void {\n    this.updateSubject();\n  }\n\n  updateCoreState(\n    data: any | typeof USE_STATE_VALUE,\n    schema: JsonSchema | typeof USE_STATE_VALUE,\n    uischema: UISchemaElement | typeof USE_STATE_VALUE,\n    ajv: Ajv | typeof USE_STATE_VALUE,\n    validationMode: ValidationMode | typeof USE_STATE_VALUE,\n    additionalErrors: ErrorObject[] | typeof USE_STATE_VALUE\n  ): void {\n    const newData = data === USE_STATE_VALUE ? this._state.core.data : data;\n    const newSchema =\n      schema === USE_STATE_VALUE\n        ? this._state.core.schema\n        : schema ?? generateJsonSchema(newData);\n    const newUischema =\n      uischema === USE_STATE_VALUE\n        ? this._state.core.uischema\n        : uischema ?? generateDefaultUISchema(newSchema);\n    const newAjv = ajv === USE_STATE_VALUE ? this._state.core.ajv : ajv;\n    const newValidationMode =\n      validationMode === USE_STATE_VALUE\n        ? this._state.core.validationMode\n        : validationMode;\n    const newAdditionalErrors =\n      additionalErrors === USE_STATE_VALUE\n        ? this._state.core.additionalErrors\n        : additionalErrors;\n    this.updateCore(\n      Actions.updateCore(newData, newSchema, newUischema, {\n        ajv: newAjv,\n        validationMode: newValidationMode,\n        additionalErrors: newAdditionalErrors,\n      })\n    );\n  }\n\n  private updateSubject(): void {\n    this.state.next({ jsonforms: this._state });\n  }\n}\n","/*\n  The MIT License\n\n  Copyright (c) 2017-2019 EclipseSource Munich\n  https://github.com/eclipsesource/jsonforms\n\n  Permission is hereby granted, free of charge, to any person obtaining a copy\n  of this software and associated documentation files (the \"Software\"), to deal\n  in the Software without restriction, including without limitation the rights\n  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n  copies of the Software, and to permit persons to whom the Software is\n  furnished to do so, subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be included in\n  all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n  THE SOFTWARE.\n*/\nimport {\n  Actions,\n  computeLabel,\n  ControlElement,\n  JsonFormsState,\n  JsonSchema,\n  OwnPropsOfControl,\n  StatePropsOfControl,\n} from '@jsonforms/core';\nimport { Component, Input, OnDestroy, OnInit } from '@angular/core';\nimport {\n  AbstractControl,\n  FormControl,\n  ValidationErrors,\n  ValidatorFn,\n} from '@angular/forms';\nimport type { Subscription } from 'rxjs';\n\nimport { JsonFormsBaseRenderer } from './base.renderer';\nimport { JsonFormsAngularService } from './jsonforms.service';\nimport merge from 'lodash/merge';\n@Component({\n  template: '',\n})\nexport abstract class JsonFormsAbstractControl<\n    Props extends StatePropsOfControl\n  >\n  extends JsonFormsBaseRenderer<ControlElement>\n  implements OnInit, OnDestroy\n{\n  @Input() id: string;\n  @Input() disabled: boolean;\n  @Input() visible: boolean;\n\n  form: FormControl;\n  subscription: Subscription;\n  data: any;\n  label: string;\n  description: string;\n  error: string | null;\n  scopedSchema: JsonSchema;\n  rootSchema: JsonSchema;\n  enabled: boolean;\n  hidden: boolean;\n  propsPath: string;\n\n  constructor(protected jsonFormsService: JsonFormsAngularService) {\n    super();\n    this.form = new FormControl(\n      {\n        value: '',\n        disabled: true,\n      },\n      {\n        updateOn: 'change',\n        validators: this.validator.bind(this),\n      }\n    );\n  }\n\n  getEventValue = (event: any) => event.value;\n\n  onChange(ev: any) {\n    this.jsonFormsService.updateCore(\n      Actions.update(this.propsPath, () => this.getEventValue(ev))\n    );\n    this.triggerValidation();\n  }\n\n  shouldShowUnfocusedDescription(): boolean {\n    const config = this.jsonFormsService.getConfig();\n    const appliedUiSchemaOptions = merge({}, config, this.uischema.options);\n    return !!appliedUiSchemaOptions.showUnfocusedDescription;\n  }\n\n  ngOnInit() {\n    this.jsonFormsService.$state.subscribe({\n      next: (state: JsonFormsState) => {\n        const props = this.mapToProps(state);\n        const {\n          data,\n          enabled,\n          errors,\n          label,\n          required,\n          schema,\n          rootSchema,\n          visible,\n          path,\n          config,\n        } = props;\n        this.label = computeLabel(\n          label,\n          required,\n          config ? config.hideRequiredAsterisk : false\n        );\n        this.data = data;\n        this.error = errors;\n        this.enabled = enabled;\n        this.isEnabled() ? this.form.enable() : this.form.disable();\n        this.hidden = !visible;\n        this.scopedSchema = schema;\n        this.rootSchema = rootSchema;\n        this.description =\n          this.scopedSchema !== undefined ? this.scopedSchema.description : '';\n        this.id = props.id;\n        this.form.setValue(data);\n        this.propsPath = path;\n        this.mapAdditionalProps(props);\n      },\n    });\n    this.triggerValidation();\n  }\n\n  validator: ValidatorFn = (_c: AbstractControl): ValidationErrors | null => {\n    return this.error ? { error: this.error } : null;\n  };\n\n  mapAdditionalProps(_props: Props) {\n    // do nothing by default\n  }\n\n  ngOnDestroy() {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n\n  isEnabled(): boolean {\n    return this.enabled;\n  }\n\n  protected getOwnProps(): OwnPropsOfControl {\n    const props: OwnPropsOfControl = {\n      uischema: this.uischema,\n      schema: this.schema,\n      path: this.path,\n      id: this.id,\n    };\n    if (this.disabled !== undefined) {\n      props.enabled = !this.disabled;\n    }\n    if (this.visible !== undefined) {\n      props.visible = this.visible;\n    }\n    return props;\n  }\n\n  protected abstract mapToProps(state: JsonFormsState): Props;\n\n  protected triggerValidation() {\n    // these cause the correct update of the error underline, seems to be\n    // related to ionic-team/ionic#11640\n    this.form.markAsTouched();\n    this.form.updateValueAndValidity();\n  }\n}\n","/*\n  The MIT License\n\n  Copyright (c) 2017-2019 EclipseSource Munich\n  https://github.com/eclipsesource/jsonforms\n\n  Permission is hereby granted, free of charge, to any person obtaining a copy\n  of this software and associated documentation files (the \"Software\"), to deal\n  in the Software without restriction, including without limitation the rights\n  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n  copies of the Software, and to permit persons to whom the Software is\n  furnished to do so, subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be included in\n  all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n  THE SOFTWARE.\n*/\nimport {\n  JsonFormsState,\n  mapStateToControlProps,\n  mapStateToControlWithDetailProps,\n  StatePropsOfControl,\n  StatePropsOfControlWithDetail,\n} from '@jsonforms/core';\nimport type { OnDestroy, OnInit } from '@angular/core';\nimport { JsonFormsAbstractControl } from './abstract-control';\n\nexport class JsonFormsControl\n  extends JsonFormsAbstractControl<StatePropsOfControl>\n  implements OnInit, OnDestroy\n{\n  protected mapToProps(state: JsonFormsState): StatePropsOfControl {\n    const props = mapStateToControlProps(state, this.getOwnProps());\n    return { ...props };\n  }\n}\n\nexport class JsonFormsControlWithDetail\n  extends JsonFormsAbstractControl<StatePropsOfControlWithDetail>\n  implements OnInit, OnDestroy\n{\n  protected mapToProps(state: JsonFormsState): StatePropsOfControlWithDetail {\n    const props = mapStateToControlWithDetailProps(state, this.getOwnProps());\n    return { ...props };\n  }\n}\n","/*\n  The MIT License\n\n  Copyright (c) 2017-2019 EclipseSource Munich\n  https://github.com/eclipsesource/jsonforms\n\n  Permission is hereby granted, free of charge, to any person obtaining a copy\n  of this software and associated documentation files (the \"Software\"), to deal\n  in the Software without restriction, including without limitation the rights\n  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n  copies of the Software, and to permit persons to whom the Software is\n  furnished to do so, subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be included in\n  all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n  THE SOFTWARE.\n*/\nimport {\n  JsonFormsState,\n  mapStateToArrayControlProps,\n  StatePropsOfArrayControl,\n} from '@jsonforms/core';\nimport type { OnDestroy, OnInit } from '@angular/core';\nimport { JsonFormsAbstractControl } from './abstract-control';\n\nexport class JsonFormsArrayControl\n  extends JsonFormsAbstractControl<StatePropsOfArrayControl>\n  implements OnInit, OnDestroy\n{\n  protected mapToProps(state: JsonFormsState): StatePropsOfArrayControl {\n    const props = mapStateToArrayControlProps(state, this.getOwnProps());\n    return { ...props };\n  }\n}\n","/*\n  The MIT License\n  \n  Copyright (c) 2017-2019 EclipseSource Munich\n  https://github.com/eclipsesource/jsonforms\n  \n  Permission is hereby granted, free of charge, to any person obtaining a copy\n  of this software and associated documentation files (the \"Software\"), to deal\n  in the Software without restriction, including without limitation the rights\n  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n  copies of the Software, and to permit persons to whom the Software is\n  furnished to do so, subject to the following conditions:\n  \n  The above copyright notice and this permission notice shall be included in\n  all copies or substantial portions of the Software.\n  \n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n  THE SOFTWARE.\n*/\nimport { Component } from '@angular/core';\n@Component({\n  selector: 'unknown.renderer',\n  template: 'No applicable renderer found!',\n})\nexport class UnknownRenderer {}\n","/*\n  The MIT License\n\n  Copyright (c) 2017-2019 EclipseSource Munich\n  https://github.com/eclipsesource/jsonforms\n\n  Permission is hereby granted, free of charge, to any person obtaining a copy\n  of this software and associated documentation files (the \"Software\"), to deal\n  in the Software without restriction, including without limitation the rights\n  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n  copies of the Software, and to permit persons to whom the Software is\n  furnished to do so, subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be included in\n  all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n  THE SOFTWARE.\n*/\nimport maxBy from 'lodash/maxBy';\nimport {\n  ComponentFactoryResolver,\n  Directive,\n  Input,\n  OnDestroy,\n  OnInit,\n  Type,\n  ViewContainerRef,\n} from '@angular/core';\nimport {\n  createId,\n  isControl,\n  getConfig,\n  JsonFormsProps,\n  JsonFormsState,\n  JsonSchema,\n  mapStateToJsonFormsRendererProps,\n  OwnPropsOfRenderer,\n  StatePropsOfJsonFormsRenderer,\n  UISchemaElement,\n} from '@jsonforms/core';\nimport { UnknownRenderer } from './unknown.component';\nimport { JsonFormsBaseRenderer } from './base.renderer';\nimport type { Subscription } from 'rxjs';\nimport { JsonFormsControl } from './control';\nimport { JsonFormsAngularService } from './jsonforms.service';\n\nimport { get, isEqual } from 'lodash';\n\nconst areEqual = (\n  prevProps: StatePropsOfJsonFormsRenderer,\n  nextProps: StatePropsOfJsonFormsRenderer\n) => {\n  return (\n    get(prevProps, 'renderers.length') === get(nextProps, 'renderers.length') &&\n    get(prevProps, 'cells.length') === get(nextProps, 'cells.length') &&\n    get(prevProps, 'uischemas.length') === get(nextProps, 'uischemas.length') &&\n    get(prevProps, 'schema') === get(nextProps, 'schema') &&\n    isEqual(get(prevProps, 'uischema'), get(nextProps, 'uischema')) &&\n    get(prevProps, 'path') === get(nextProps, 'path')\n  );\n};\n\n@Directive({\n  selector: 'jsonforms-outlet',\n})\nexport class JsonFormsOutlet\n  extends JsonFormsBaseRenderer<UISchemaElement>\n  implements OnInit, OnDestroy\n{\n  private subscription: Subscription;\n  private previousProps: StatePropsOfJsonFormsRenderer;\n\n  constructor(\n    private viewContainerRef: ViewContainerRef,\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private jsonformsService: JsonFormsAngularService\n  ) {\n    super();\n  }\n\n  @Input()\n  set renderProps(renderProps: OwnPropsOfRenderer) {\n    this.path = renderProps.path;\n    this.schema = renderProps.schema;\n    this.uischema = renderProps.uischema;\n    this.update(this.jsonformsService.getState());\n  }\n\n  ngOnInit(): void {\n    this.subscription = this.jsonformsService.$state.subscribe({\n      next: (state: JsonFormsState) => this.update(state),\n    });\n  }\n\n  update(state: JsonFormsState) {\n    const props = mapStateToJsonFormsRendererProps(state, {\n      schema: this.schema,\n      uischema: this.uischema,\n      path: this.path,\n    });\n    if (areEqual(this.previousProps, props)) {\n      return;\n    } else {\n      this.previousProps = props;\n    }\n    const { renderers } = props as JsonFormsProps;\n    const schema: JsonSchema = this.schema || props.schema;\n    const uischema = this.uischema || props.uischema;\n    const testerContext = {\n      rootSchema: props.rootSchema,\n      config: getConfig(state),\n    };\n\n    const renderer = maxBy(renderers, (r) =>\n      r.tester(uischema, schema, testerContext)\n    );\n    let bestComponent: Type<any> = UnknownRenderer;\n    if (\n      renderer !== undefined &&\n      renderer.tester(uischema, schema, testerContext) !== -1\n    ) {\n      bestComponent = renderer.renderer;\n    }\n\n    const componentFactory =\n      this.componentFactoryResolver.resolveComponentFactory(bestComponent);\n    this.viewContainerRef.clear();\n    const currentComponentRef =\n      this.viewContainerRef.createComponent(componentFactory);\n\n    if (currentComponentRef.instance instanceof JsonFormsBaseRenderer) {\n      const instance =\n        currentComponentRef.instance as JsonFormsBaseRenderer<UISchemaElement>;\n      instance.uischema = uischema;\n      instance.schema = schema;\n      instance.path = this.path;\n      if (instance instanceof JsonFormsControl) {\n        const controlInstance = instance as JsonFormsControl;\n        if (controlInstance.id === undefined) {\n          const id = isControl(props.uischema)\n            ? createId(props.uischema.scope)\n            : undefined;\n          (instance as JsonFormsControl).id = id;\n        }\n      }\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n}\n","/*\n  The MIT License\n\n  Copyright (c) 2017-2020 EclipseSource Munich\n  https://github.com/eclipsesource/jsonforms\n\n  Permission is hereby granted, free of charge, to any person obtaining a copy\n  of this software and associated documentation files (the \"Software\"), to deal\n  in the Software without restriction, including without limitation the rights\n  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n  copies of the Software, and to permit persons to whom the Software is\n  furnished to do so, subject to the following conditions:\n\n  The above copyright notice and this permission notice shall be included in\n  all copies or substantial portions of the Software.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n  THE SOFTWARE.\n*/\nimport {\n  Component,\n  DoCheck,\n  EventEmitter,\n  Input,\n  OnChanges,\n  OnInit,\n  Output,\n  SimpleChanges,\n} from '@angular/core';\nimport {\n  Actions,\n  JsonFormsI18nState,\n  JsonFormsRendererRegistryEntry,\n  JsonSchema,\n  Middleware,\n  UISchemaElement,\n  UISchemaTester,\n  ValidationMode,\n  defaultMiddleware,\n} from '@jsonforms/core';\nimport Ajv, { ErrorObject } from 'ajv';\nimport { JsonFormsAngularService, USE_STATE_VALUE } from './jsonforms.service';\n\n// TODO Can this be rewritten to not use DoCheck and OnChanges?\n/* eslint-disable @angular-eslint/no-conflicting-lifecycle */\n@Component({\n  selector: 'jsonforms',\n  template: '<jsonforms-outlet></jsonforms-outlet>',\n  providers: [JsonFormsAngularService],\n})\nexport class JsonForms implements DoCheck, OnChanges, OnInit {\n  @Input() uischema: UISchemaElement;\n  @Input() schema: JsonSchema;\n  @Input() data: any;\n  @Input() renderers: JsonFormsRendererRegistryEntry[];\n  @Input() uischemas: { tester: UISchemaTester; uischema: UISchemaElement }[];\n  @Output() dataChange = new EventEmitter<any>();\n  @Input() readonly: boolean;\n  @Input() validationMode: ValidationMode;\n  @Input() ajv: Ajv;\n  @Input() config: any;\n  @Input() i18n: JsonFormsI18nState;\n  @Input() additionalErrors: ErrorObject[];\n  @Input() middleware: Middleware = defaultMiddleware;\n  @Output() errors = new EventEmitter<ErrorObject[]>();\n\n  private previousData: any;\n  private previousErrors: ErrorObject[];\n\n  private initialized = false;\n  oldI18N: JsonFormsI18nState;\n\n  constructor(private jsonformsService: JsonFormsAngularService) {}\n\n  ngOnInit(): void {\n    this.jsonformsService.init(\n      {\n        core: {\n          data: this.data,\n          uischema: this.uischema,\n          schema: this.schema,\n          ajv: this.ajv,\n          validationMode: this.validationMode,\n          additionalErrors: this.additionalErrors,\n        },\n        uischemas: this.uischemas,\n        i18n: this.i18n,\n        renderers: this.renderers,\n        config: this.config,\n        readonly: this.readonly,\n      },\n      this.middleware\n    );\n    this.jsonformsService.$state.subscribe((state) => {\n      const data = state?.jsonforms?.core?.data;\n      const errors = state?.jsonforms?.core?.errors;\n      if (this.previousData !== data) {\n        this.previousData = data;\n        this.dataChange.emit(data);\n      }\n      if (this.previousErrors !== errors) {\n        this.previousErrors = errors;\n        this.errors.emit(errors);\n      }\n    });\n    this.oldI18N = this.i18n;\n    this.initialized = true;\n  }\n\n  ngDoCheck(): void {\n    // we can't use ngOnChanges as then nested i18n changes will not be detected\n    // the update will result in a no-op when the parameters did not change\n    if (\n      this.oldI18N?.locale !== this.i18n?.locale ||\n      this.oldI18N?.translate !== this.i18n?.translate ||\n      this.oldI18N?.translateError !== this.i18n?.translateError\n    ) {\n      this.jsonformsService.updateI18n(\n        Actions.updateI18n(\n          this.oldI18N?.locale === this.i18n?.locale\n            ? this.jsonformsService.getState().jsonforms.i18n.locale\n            : this.i18n?.locale,\n          this.oldI18N?.translate === this.i18n?.translate\n            ? this.jsonformsService.getState().jsonforms.i18n.translate\n            : this.i18n?.translate,\n          this.oldI18N?.translateError === this.i18n?.translateError\n            ? this.jsonformsService.getState().jsonforms.i18n.translateError\n            : this.i18n?.translateError\n        )\n      );\n      this.oldI18N = this.i18n;\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (!this.initialized) {\n      return;\n    }\n    const newData = changes.data;\n    const newSchema = changes.schema;\n    const newUiSchema = changes.uischema;\n    const newRenderers = changes.renderers;\n    const newUischemas = changes.uischemas;\n    const newI18n = changes.i18n;\n    const newReadonly = changes.readonly;\n    const newValidationMode = changes.validationMode;\n    const newAjv = changes.ajv;\n    const newConfig = changes.config;\n    const newAdditionalErrors = changes.additionalErrors;\n\n    if (\n      newData ||\n      newSchema ||\n      newUiSchema ||\n      newValidationMode ||\n      newAjv ||\n      newAdditionalErrors\n    ) {\n      this.jsonformsService.updateCoreState(\n        newData ? newData.currentValue : USE_STATE_VALUE,\n        newSchema ? newSchema.currentValue : USE_STATE_VALUE,\n        newUiSchema ? newUiSchema.currentValue : USE_STATE_VALUE,\n        newAjv ? newAjv.currentValue : USE_STATE_VALUE,\n        newValidationMode ? newValidationMode.currentValue : USE_STATE_VALUE,\n        newAdditionalErrors ? newAdditionalErrors.currentValue : USE_STATE_VALUE\n      );\n    }\n\n    if (newRenderers && !newRenderers.isFirstChange()) {\n      this.jsonformsService.setRenderers(newRenderers.currentValue);\n    }\n\n    if (newUischemas && !newUischemas.isFirstChange()) {\n      this.jsonformsService.setUiSchemas(newUischemas.currentValue);\n    }\n\n    if (newI18n && !newI18n.isFirstChange()) {\n      this.jsonformsService.updateI18n(\n        Actions.updateI18n(\n          newI18n.currentValue?.locale,\n          newI18n.currentValue?.translate,\n          newI18n.currentValue?.translateError\n        )\n      );\n    }\n\n    if (newReadonly && !newReadonly.isFirstChange()) {\n      this.jsonformsService.setReadonly(newReadonly.currentValue);\n    }\n\n    if (newConfig && !newConfig.isFirstChange()) {\n      this.jsonformsService.updateConfig(\n        Actions.setConfig(newConfig.currentValue)\n      );\n    }\n  }\n}\n","/*\n  The MIT License\n  \n  Copyright (c) 2017-2020 EclipseSource Munich\n  https://github.com/eclipsesource/jsonforms\n  \n  Permission is hereby granted, free of charge, to any person obtaining a copy\n  of this software and associated documentation files (the \"Software\"), to deal\n  in the Software without restriction, including without limitation the rights\n  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n  copies of the Software, and to permit persons to whom the Software is\n  furnished to do so, subject to the following conditions:\n  \n  The above copyright notice and this permission notice shall be included in\n  all copies or substantial portions of the Software.\n  \n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n  THE SOFTWARE.\n*/\nimport { NgModule } from '@angular/core';\n\nimport { JsonForms } from './jsonforms-root.component';\nimport { JsonFormsOutlet } from './jsonforms.component';\nimport { UnknownRenderer } from './unknown.component';\n@NgModule({\n  declarations: [JsonFormsOutlet, UnknownRenderer, JsonForms],\n  exports: [JsonFormsOutlet, JsonForms],\n})\nexport class JsonFormsModule {}\n","/*\n  The MIT License\n  \n  Copyright (c) 2017-2020 EclipseSource Munich\n  https://github.com/eclipsesource/jsonforms\n  \n  Permission is hereby granted, free of charge, to any person obtaining a copy\n  of this software and associated documentation files (the \"Software\"), to deal\n  in the Software without restriction, including without limitation the rights\n  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n  copies of the Software, and to permit persons to whom the Software is\n  furnished to do so, subject to the following conditions:\n  \n  The above copyright notice and this permission notice shall be included in\n  all copies or substantial portions of the Software.\n  \n  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n  THE SOFTWARE.\n*/\nexport * from './base.renderer';\nexport * from './control';\nexport * from './array-control';\nexport * from './jsonforms.component';\nexport * from './jsonforms.module';\nexport * from './unknown.component';\nexport * from './jsonforms.service';\nexport * from './jsonforms-root.component';\nexport * from './abstract-control';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["i1.JsonFormsAngularService","i2.JsonFormsOutlet"],"mappings":"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"}